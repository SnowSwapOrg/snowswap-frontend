(this["webpackJsonppancake-frontend"]=this["webpackJsonppancake-frontend"]||[]).push([[7],{1017:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Le}));var r,c,a,s,o,i,d,l,u,b,j,O,h,x=n(10),p=n(0),f=n.n(p),m=n(4),w=n(200),v=n(23),k=n(34),g=n(185),y=n(2),S=n(56),T=n(26),C=n(374),A=n(120),q=n(183),U=n(9),D=n(53),M=n(30),E=n(1),I=["value","onUserInput","placeholder"],L=Object(m.e)(y.G)(r||(r=Object(x.a)(["\n  color: ",";\n  text-align: ",";\n  ::placeholder {\n    color: ",";\n  }\n"])),(function(e){var t=e.error,n=e.theme;return t?n.colors.failure:n.colors.text}),(function(e){var t=e.align;return t&&t}),(function(e){return e.theme.colors.textSubtle})),R=RegExp("^\\d*(?:\\\\[.])?\\d*$"),B=f.a.memo((function(e){var t=e.value,n=e.onUserInput,r=e.placeholder,c=Object(D.a)(e,I),a=Object(v.b)().t;return Object(E.jsx)(L,Object(U.a)(Object(U.a)({},c),{},{value:t,onChange:function(e){var t;(""===(t=e.target.value.replace(/,/g,"."))||R.test(Object(M.d)(t)))&&n(t)},inputMode:"decimal",title:a("Token Amount"),autoComplete:"off",autoCorrect:"off",type:"text",pattern:"^[0-9]*[.,]?[0-9]*$",placeholder:r||"0.0",minLength:1,maxLength:79,spellCheck:"false"}))})),F=(y.G,n(74)),z=n(378),H=n(6),P=n(47),G=n(97),J=n(41),$=n(35),Q=["token"],W=function(e){var t=e.symbol===$.g?J.b.wbnb.address:e.address;return"/images/tokens/".concat($.d,"/").concat(t,".png")},Y=function(e){var t=e.token,n=Object(D.a)(e,Q);return Object(E.jsx)(y.hb,Object(U.a)({src:W(t)},n))},K=3600,N=86400,V=2629800,X=31557600,Z=function(e){var t=Math.abs(e),n={years:0,months:0,days:0,hours:0,minutes:0,seconds:0};return t>=X&&(n.years=Math.floor(t/X),t-=n.years*X),t>=V&&(n.months=Math.floor(t/V),t-=n.months*V),t>=N&&(n.days=Math.floor(t/N),t-=n.days*N),t>=K&&(n.hours=Math.floor(t/K),t-=n.hours*K),t>=60&&(n.minutes=Math.floor(t/60),t-=60*n.minutes),n.seconds=parseInt(t.toString()),n},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return Object.keys(e).forEach((function(r){e[r]>0&&!t.includes(r)&&n.push("".concat(e[r]).concat(r.substr(0,1)))})),0===n.length?null:n.join(" ")},ee=n(85),te=n(107),ne=n(44),re=n(84),ce=n.n(re),ae=n(5),se=n.n(ae),oe=n(32),ie=n(11),de=n(241),le=n(134),ue=function(){var e=Object(oe.a)(se.a.mark((function e(t,n){var r,c;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.stake(n);case 2:return r=e.sent,e.next=5,r.wait();case 5:return c=e.sent,e.abrupt("return",c.status);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),be=function(){var e=Object(oe.a)(se.a.mark((function e(t,n){var r,c;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.withdraw(n);case 2:return r=e.sent,e.next=5,r.wait();case 5:return c=e.sent,e.abrupt("return",c.status);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=Object(oe.a)(se.a.mark((function e(t){var n,r;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getReward();case 2:return n=e.sent,e.next=5,n.wait();case 5:return r=e.sent,e.abrupt("return",r.status);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=n(86),he=n(160),xe=n(215),pe=n(153);const fe=Object(m.f)(c||(c=Object(x.a)(["\n  from {\n    max-height: 0px;\n  }\n  to {\n    max-height: 800px;\n  }\n"]))),me=Object(m.f)(a||(a=Object(x.a)(["\n  from {\n    max-height: 800px;\n  }\n  to {\n    max-height: 0px;\n  }\n"]))),we=m.e.div(s||(s=Object(x.a)(["\n  animation: ",";\n  overflow: hidden;\n  background: ",";\n  display: flex;\n  width: 100%;\n  /* flex-direction: column-reverse; */\n  flex-direction: column;\n\n  "," {\n    flex-direction: column;\n    padding: 16px 32px;\n  }\n  margin-top: 10px;\n"])),(e=>{let{expanded:t}=e;return t?Object(m.d)(o||(o=Object(x.a)(["\n          "," 300ms linear forwards\n        "])),fe):Object(m.d)(i||(i=Object(x.a)(["\n          "," 300ms linear forwards\n        "])),me)}),(e=>{let{theme:t}=e;return t.colors.background}),(e=>{let{theme:t}=e;return t.mediaQueries.lg})),ve=m.e.div(d||(d=Object(x.a)(["\n  font-size: 12px;\n  color: ",";\n  text-align: left;\n"])),(e=>{let{theme:t}=e;return t.colors.textSubtle})),ke=m.e.td(l||(l=Object(x.a)(["\n  background: ",";\n"])),(e=>{let{theme:t}=e;return t.colors.background})),ge=Object(m.e)(y.A)(u||(u=Object(x.a)(["\n  border-radius: 10px;\n  padding: 1rem;\n  border: 2px solid ",";\n"])),(e=>{let{theme:t}=e;return t.colors.cardBorder})),ye=Object(m.e)(y.r)(b||(b=Object(x.a)(["\n  transform: ",";\n  height: 20px;\n  cursor: pointer;\n"])),(e=>{let{toggled:t}=e;return t?"rotate(180deg)":"rotate(0)"})),Se=m.e.tr(j||(j=Object(x.a)(["\n  cursor: pointer;\n  border-bottom: 2px solid ",";\n  td {\n    padding: 20px;\n  }\n"])),(e=>{let{theme:t}=e;return t.colors.cardBorder})),Te=m.e.tr(O||(O=Object(x.a)(["\n  cursor: pointer;\n  border-bottom: 2px solid ",";\n  div {\n    font-size: 12px;\n  }\n  td {\n    padding: 8px;\n  }\n"])),(e=>{let{theme:t}=e;return t.colors.cardBorder})),Ce=m.e.span(h||(h=Object(x.a)(["\n  color: ",";\n  text-decoration: underline;\n  cursor: pointer;\n"])),(e=>{let{theme:t}=e;return t.colors.primary}));var Ae,qe,Ue,De=e=>{let{farm:t}=e;const{t:n}=Object(v.b)(),{isDesktop:r,isMobile:c}=Object(y.tb)(),a=t.startTime+t.rewardsDuration<Date.now()/1e3,s=t.startTime+t.rewardsDuration-Date.now()/1e3,{account:o,chainId:i,library:d}=Object(T.a)(),[l,u]=Object(p.useState)(""),[b,j]=Object(p.useState)(""),O=Object(ee.e)(t.token.address,J.b.wbnb.address),h=Object(ee.e)(t.quoteToken.address,J.b.wbnb.address),x=Object(ee.e)(t.rewardToken.address,J.b.wbnb.address),f=Object(ne.c)(t.token.address),m=Object(ne.c)(t.quoteToken.address),[w,k]=Object(te.b)(null!==f&&void 0!==f?f:void 0,null!==m&&void 0!==m?m:void 0),U=Object(q.a)(null===k||void 0===k?void 0:k.liquidityToken),D=(null===k||void 0===k?void 0:k.reserve0.token.address)===t.token.address?null===k||void 0===k?void 0:k.reserve0:null===k||void 0===k?void 0:k.reserve1,M=(null===k||void 0===k?void 0:k.reserve0.token.address)===t.token.address?null===k||void 0===k?void 0:k.reserve1:null===k||void 0===k?void 0:k.reserve0,I=Object(p.useMemo)((()=>{const e=O&&O[t.token.address.toLowerCase()];if(e&&D){const n=e?new ce.a(O[t.token.address.toLowerCase()]):new ce.a(1),r=new ce.a(Object(C.a)(P.a.from(D.raw.toString()),D.currency.decimals,D.currency.decimals));return n.times(r)}return new ce.a(0)}),[t.token.address,O,D]),L=Object(p.useMemo)((()=>{const e=h&&h[t.quoteToken.address.toLowerCase()];if(e&&M){const n=e?new ce.a(h[t.quoteToken.address.toLowerCase()]):new ce.a(1),r=new ce.a(Object(C.a)(P.a.from(M.raw.toString()),M.currency.decimals,M.currency.decimals));return n.times(r)}return new ce.a(0)}),[t.quoteToken.address,h,M]),R=Object(p.useMemo)((()=>{const e=x&&x[t.rewardToken.address.toLowerCase()];if(e){const n=new ce.a(e?x[t.rewardToken.address.toLowerCase()]:1),r=new ce.a(Object(C.a)(P.a.from(t.rewardsAmount),t.rewardToken.decimals,t.rewardToken.decimals));return n.times(r)}return new ce.a(0)}),[t.rewardToken.address,t.rewardToken.decimals,t.rewardsAmount,x]),$=I.eq(0)?L.times(2):I.times(2),Q=t.poolAddress,W=Object(S.d)(Q,!0),K=function(e){var t=Object(p.useState)(le.b),n=Object(ie.a)(t,2),r=n[0],c=n[1],a=Object(de.a)().slowRefresh;return Object(p.useEffect)((function(){var t=function(){var t=Object(oe.a)(se.a.mark((function t(){var n;return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.totalSupply();case 2:n=t.sent,c(Object(le.c)(n));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e&&t()}),[e,a]),r}(W),N=function(e,t){var n=Object(p.useState)(le.b),r=Object(ie.a)(n,2),c=r[0],a=r[1],s=Object(de.a)().fastRefresh;return Object(p.useEffect)((function(){var n=function(){var n=Object(oe.a)(se.a.mark((function n(){var r;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.balanceOf(t);case 2:r=n.sent,a(Object(le.c)(r));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();e&&t&&n()}),[t,e,s]),c}(W,o),V=function(e,t){var n=Object(p.useState)(le.b),r=Object(ie.a)(n,2),c=r[0],a=r[1],s=Object(de.a)().fastRefresh;return Object(p.useEffect)((function(){var n=function(){var n=Object(oe.a)(se.a.mark((function n(){var r;return se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.earned(t);case 2:r=n.sent,a(Object(le.c)(r));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();e&&t&&n()}),[t,e,s]),c}(W,o),X=Object(A.b)(Object(g.a)(t.lpAddresses)),{onStake:re}=function(e){return{onStake:Object(p.useCallback)(function(){var t=Object(oe.a)(se.a.mark((function t(n){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ue(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e])}}(W),{onUnstake:ae}=function(e){return{onUnstake:Object(p.useCallback)(function(){var t=Object(oe.a)(se.a.mark((function t(n){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,be(e,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e])}}(W),{onHarvest:fe}=function(e){return{onHarvest:Object(p.useCallback)(Object(oe.a)(se.a.mark((function t(){return se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,je(e);case 2:case"end":return t.stop()}}),t)}))),[e])}}(W),[me,Ae]=Object(p.useState)(!1),qe=()=>{Ae(!me)},Ue=Object(y.rb)(me,300),De=Object(z.a)(new H.i(i,Object(g.a)(t.lpAddresses),18),o,null===W||void 0===W?void 0:W.address),Me=P.a.from((null===De||void 0===De?void 0:De.raw.toString())||"0").eq(0)||P.a.from((null===De||void 0===De?void 0:De.raw.toString())||"0").lt(Object(F.parseUnits)(l.toString()||"0",18)),{handleApprove:Ee,requestedApproval:Ie}=function(e,t,n){var r=Object(p.useState)(!1),c=Object(ie.a)(r,2),a=c[0],s=c[1],o=Object(v.b)().t,i=Object(he.a)(),d=i.toastSuccess,l=i.toastError,u=Object(xe.a)().callWithGasPrice;return{handleApprove:function(){var r=Object(oe.a)(se.a.mark((function r(){var c,a;return se.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u(t,"approve",[e.address,Oe.a.constants.MaxUint256]);case 2:return c=r.sent,s(!0),r.next=6,c.wait();case 6:(a=r.sent).status?(d(o("Contract Enabled"),Object(E.jsx)(pe.b,{txHash:a.transactionHash,children:o("You can now stake in farm")})),n(),s(!1)):(l(o("Error"),o("Please try again. Confirm the transaction and make sure you are paying enough gas!")),s(!1));case 8:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),requestedApproval:a}}(W,Object(G.h)(Object(g.a)(t.lpAddresses),d.getSigner()),(()=>{console.log("success")})),Le=$.times(K.div((null===U||void 0===U?void 0:U.raw.toString())||0)),Re=a?0:R.div(new ce.a(t.rewardsDuration)).times(31536e3).div(Le).times(100);return Object(E.jsxs)(E.Fragment,{children:[c?Object(E.jsxs)(Te,{onClick:qe,children:[Object(E.jsx)("td",{children:Object(E.jsxs)(y.A,{width:"50px",children:[Object(E.jsx)(Y,{width:25,height:25,token:new H.i(t.token.chainId,t.token.address,t.token.decimals)}),Object(E.jsx)(Y,{ml:"-5px",width:25,height:25,token:new H.i(t.quoteToken.chainId,t.quoteToken.address,t.quoteToken.decimals)})]})}),Object(E.jsx)("td",{children:Object(E.jsx)(y.eb,{children:t.lpSymbol})}),Object(E.jsxs)("td",{children:[Object(E.jsx)(ve,{children:"Unclaimed"}),Object(E.jsxs)(y.eb,{children:[Object(C.b)(V,t.rewardToken.decimals,4)," ",t.rewardToken.symbol]})]}),Object(E.jsx)("td",{children:Object(E.jsx)(ye,{color:"primary",toggled:me})})]}):Object(E.jsxs)(Se,{onClick:qe,children:[Object(E.jsx)("td",{children:Object(E.jsxs)(y.A,{width:"60px",children:[Object(E.jsx)(Y,{width:30,height:30,token:new H.i(t.token.chainId,t.token.address,t.token.decimals)}),Object(E.jsx)(Y,{ml:"-10px",width:30,height:30,token:new H.i(t.quoteToken.chainId,t.quoteToken.address,t.quoteToken.decimals)})]})}),Object(E.jsx)("td",{children:Object(E.jsx)(y.eb,{children:t.lpSymbol})}),Object(E.jsxs)("td",{children:[Object(E.jsx)(ve,{children:n("APR")}),Object(E.jsxs)(y.eb,{children:[Re.toFixed(2),"%",a?" - Expired":""]})]}),Object(E.jsxs)("td",{children:[Object(E.jsx)(ve,{children:n("My Share")}),Object(E.jsxs)(y.eb,{children:[Object(C.b)(N,18,12)," (",N.eq(0)?"0":N.div(K).multipliedBy(100).toFixed(2),"%)"]})]}),Object(E.jsxs)("td",{children:[Object(E.jsx)(ve,{children:n("Unclaimed")}),Object(E.jsxs)(y.eb,{children:[Object(C.b)(V,t.rewardToken.decimals,4)," ",t.rewardToken.symbol]})]}),Object(E.jsx)("td",{children:Object(E.jsx)(ye,{color:"primary",toggled:me})})]}),Ue&&Object(E.jsx)("tr",{children:Object(E.jsx)(ke,{colSpan:6,children:Object(E.jsxs)(we,{expanded:Ue,children:[Object(E.jsxs)(y.A,{justifyContent:"space-between",width:"100%",flexDirection:c?"column":"row",children:[Object(E.jsxs)(ge,{flex:"1",mx:"0.25rem",mb:"1rem",flexDirection:"column",children:[Object(E.jsxs)(y.A,{pb:"0.7rem",justifyContent:"space-between",children:[Object(E.jsx)(ve,{children:n("Stake")}),Object(E.jsxs)(ve,{children:[n("Balance"),":"," ",Object(E.jsx)(Ce,{onClick:()=>{u(Object(C.b)(X.balance,18,18))},children:Object(C.b)(X.balance,18,18)})," "]})]}),Object(E.jsx)(y.A,{pb:"0.7rem",children:Object(E.jsx)(B,{placeholder:"0",value:l,onUserInput:e=>{u(e)}})}),Object(E.jsx)(y.A,{children:Me?Object(E.jsx)(y.i,{width:"100%",scale:"sm",disabled:Ie,onClick:Ee,variant:"secondary",children:n("Enable")}):Object(E.jsx)(y.i,{width:"100%",scale:"sm",disabled:Object(F.parseUnits)(l.toString()||"0",18).eq(P.a.from(0))||Object(F.parseUnits)(l.toString()||"0",18).gt(P.a.from(X.balance.toString()))||a,onClick:()=>{re(Object(F.parseUnits)(l.toString()||"0",18).toString())},children:n("Stake")})})]}),Object(E.jsxs)(ge,{flex:"1",mx:"0.25rem",mb:"1rem",flexDirection:"column",children:[Object(E.jsxs)(y.A,{pb:"0.7rem",justifyContent:"space-between",children:[Object(E.jsx)(ve,{children:n("Unstake")}),Object(E.jsxs)(ve,{children:[n("My Share"),":"," ",Object(E.jsx)(Ce,{onClick:()=>{j(Object(C.b)(N,18,18))},children:Object(C.b)(N,18,18)})]})]}),Object(E.jsx)(y.A,{pb:"0.7rem",children:Object(E.jsx)(B,{placeholder:"0",value:b,onUserInput:e=>{j(e)}})}),Object(E.jsx)(y.A,{children:Object(E.jsx)(y.i,{width:"100%",scale:"sm",disabled:Object(F.parseUnits)(b.toString()||"0",18).gt(P.a.from(N.toString())),onClick:()=>{ae(Object(F.parseUnits)(b.toString()||"0",18).toString())},children:n("Unstake")})})]}),Object(E.jsxs)(ge,{flexDirection:"column",mb:"1rem",mx:"0.25rem",children:[Object(E.jsx)(y.A,{pb:"0.7rem",children:Object(E.jsxs)(y.eb,{children:[Object(C.b)(V,t.rewardToken.decimals,4)," ",t.rewardToken.symbol]})}),Object(E.jsx)(y.A,{children:Object(E.jsx)(y.i,{disabled:V.eq(0),width:"100%",scale:"sm",onClick:fe,children:n("Claim")})})]})]}),Object(E.jsxs)(y.h,{pb:"2rem",children:[Object(E.jsxs)(ve,{children:[n("Earliest Start Time"),":"]}),Object(E.jsx)(y.eb,{children:new Date(1e3*t.startTime).toLocaleDateString(void 0)}),Object(E.jsxs)(ve,{children:[n("Rewards Duration"),":"]}),Object(E.jsx)(y.eb,{children:_(Z(t.rewardsDuration))}),!a&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(ve,{children:[n("end in"),":"]}),Object(E.jsx)(y.eb,{children:_(Z(s))})]}),Object(E.jsxs)(ve,{children:[n("APR"),":"]}),Object(E.jsxs)(y.eb,{children:[Re.toFixed(2),"%",a?" - Expired":""]})]})]})})})]})},Me=m.e.div(Ae||(Ae=Object(x.a)(["\n  align-items: flex-start;\n  display: flex;\n  flex-direction: column;\n  /* height: calc(100vh - 64px); */\n  justify-content: flex-start;\n"]))),Ee=m.e.table(qe||(qe=Object(x.a)(["\n  border-collapse: collapse;\n  font-size: 14px;\n  border-radius: 20px 20px 0 0;\n  margin-left: auto;\n  margin-right: auto;\n  width: 100%;\n  background: ",";\n  color: ",";\n"])),(function(e){return e.theme.card.background}),(function(e){return e.theme.colors.text})),Ie=m.e.tbody(Ue||(Ue=Object(x.a)(["\n  & tr {\n    td {\n      font-size: 16px;\n      vertical-align: middle;\n    }\n  }\n"]))),Le=function(){Object(v.b)().t;return Object(E.jsx)(w.b,{children:Object(E.jsx)(Me,{children:Object(E.jsx)(Ee,{children:Object(E.jsx)(Ie,{children:k.w.map((function(e){return Object(g.a)(e.lpAddresses)?Object(E.jsx)(De,{farm:e},e.pid):null}))})})})})}}}]);